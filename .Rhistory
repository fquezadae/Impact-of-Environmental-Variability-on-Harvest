legend.position = "none",
panel.grid = element_blank()
)
# Extraer posiciones de etiquetas
stratum_data <- ggplot_build(p)$data[[2]]
left_labels <- stratum_data %>%
filter(x == 1) %>%
mutate(x = x - 0.05,
stratum = str_wrap(stratum, width = 20))
right_labels <- stratum_data %>%
filter(x == 2) %>%
mutate(x = x + 0.05,
stratum = str_wrap(stratum, width = 20))
# Agregar etiquetas con repel
p +
geom_text_repel(
data = left_labels,
aes(x = x, y = y, label = stratum),
inherit.aes = FALSE,
hjust = 1, nudge_x = -0.1, direction = "y",
size = 2.5, segment.color = "grey60", segment.size = 0.3
) +
geom_text_repel(
data = right_labels,
aes(x = x, y = y, label = stratum),
inherit.aes = FALSE,
hjust = 0, nudge_x = 0.1, direction = "y",
size = 2.5, segment.color = "grey60", segment.size = 0.3
)
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggalluvial)
library(patchwork)
library(ggrepel)
strategy_transitions <- full_join(strategy_before, strategy_after, by = c("COD_BARCO", "TIPO_FLOTA")) %>%
mutate(
strategy_Before = ifelse(is.na(strategy_Before), "No fishing", strategy_Before),
strategy_After  = ifelse(is.na(strategy_After),  "No fishing", strategy_After)
) %>% filter(TIPO_FLOTA == "IND")
transition_counts <- strategy_transitions %>%
count(strategy_Before, strategy_After)
simplify_focus_strategy <- function(strategy) {
ifelse(strategy == "Only Sardine", "Sardine",
ifelse(strategy == "Only Anchoveta", "Anchoveta",
ifelse(strategy == "Only JackMackerel", "JackMackerel",
ifelse(grepl("Sardine", strategy) & grepl("Anchoveta", strategy) & grepl("JackMackerel", strategy),
"Sardine, JackMackerel & Anchoveta",
ifelse(grepl("Sardine", strategy) & grepl("Anchoveta", strategy), "Sardine & Anchoveta",
ifelse(grepl("Sardine", strategy) & grepl("JackMackerel", strategy), "Sardine & JackMackerel",
ifelse(grepl("JackMackerel", strategy) & grepl("Anchoveta", strategy), "JackMackerel & Anchoveta",
ifelse(strategy == "No fishing", "No fishing", "Other"))))))))
}
strategy_transitions_focus <- strategy_transitions %>%
mutate(
strategy_Before_simple = simplify_focus_strategy(strategy_Before),
strategy_After_simple = simplify_focus_strategy(strategy_After)
)
# %>%
#   filter(strategy_Before_simple %in% c("Sardine", "Anchoveta", "Sardine & Anchoveta", "Sardine & JackMackerel", "JackMackerel & Anchoveta", "Sardine, JackMackerel & Anchoveta","No fishing") |
#            strategy_After_simple %in% c("Sardine", "Anchoveta", "Sardine & Anchoveta", "Sardine & JackMackerel", "JackMackerel & Anchoveta", "Sardine, JackMackerel & Anchoveta","No fishing"))# %>%
#   filter(strategy_Before_simple %in% c("Sardine", "Anchoveta", "Sardine & Anchoveta", "Sardine & JackMackerel", "JackMackerel & Anchoveta", "Sardine, JackMackerel & Anchoveta","No fishing") |
#            strategy_After_simple %in% c("Sardine", "Anchoveta", "Sardine & Anchoveta", "Sardine & JackMackerel", "JackMackerel & Anchoveta", "Sardine, JackMackerel & Anchoveta","No fishing"))
transition_counts_focus <- strategy_transitions_focus %>%
count(strategy_Before_simple, strategy_After_simple)
# Base plot
p <- ggplot(transition_counts_focus,
aes(axis1 = strategy_Before_simple,
axis2 = strategy_After_simple,
y = n)) +
geom_flow(aes(fill = strategy_Before_simple),
width = 1/12, knot.pos = 0.4, alpha = 0.8) +
geom_stratum(width = 1/12, fill = "gray95", color = "black") +
scale_x_discrete(limits = c("2012–2018", "2019–2024"),
expand = c(.25, .25)) +
scale_fill_brewer(type = "qual", palette = "Set2") +
labs(x = "", y = "Number of Vessels") +
theme_minimal(base_size = 12) +
theme(
legend.position = "none",
panel.grid = element_blank()
)
# Extraer posiciones de etiquetas
stratum_data <- ggplot_build(p)$data[[2]]
left_labels <- stratum_data %>%
filter(x == 1) %>%
mutate(x = x - 0.05,
stratum = str_wrap(stratum, width = 20))
right_labels <- stratum_data %>%
filter(x == 2) %>%
mutate(x = x + 0.05,
stratum = str_wrap(stratum, width = 20))
# Agregar etiquetas con repel
p +
geom_text_repel(
data = left_labels,
aes(x = x, y = y, label = stratum),
inherit.aes = FALSE,
hjust = 1, nudge_x = -0.1, direction = "y",
size = 2.5, segment.color = "grey60", segment.size = 0.3
) +
geom_text_repel(
data = right_labels,
aes(x = x, y = y, label = stratum),
inherit.aes = FALSE,
hjust = 0, nudge_x = 0.1, direction = "y",
size = 2.5, segment.color = "grey60", segment.size = 0.3
)
library(readxl)
library(dplyr)
harvest_IFOP_month <- readRDS("data/harvest/IFOP_month.rds")
harvest_IFOP <- readRDS("data/harvest/IFOP.rds")
harvest_SERNAPESCA <- readRDS("data/harvest/sernapesca.rds")
#---- IFOP loogbook data ----
harvest_IFOP_logbooks <- logbooks %>%
filter(year >= 2012) %>%
filter(REGION %in% c(5,6,7,8,9,10,14,16)) %>%
group_by(NOMBRE_ESPECIE, year) %>%
summarise(
harvest_IFOP_loogbook_centrosur = sum(CAPTURA_RETENIDA, na.rm = TRUE),
.groups = "drop"
) %>%
rename(specie = NOMBRE_ESPECIE) %>%
mutate(harvest_IFOP_loogbook_centrosur = harvest_IFOP_loogbook_centrosur / 1000)
#---- Harvest data merged ----
harvest <- left_join(harvest_IFOP, harvest_SERNAPESCA, by = c("year", "specie"))
harvest <- left_join(harvest, harvest_IFOP_logbooks, by = c("year", "specie"))
# Spanish to English month translation
month_translation <- c(
"ene" = "jan", "feb" = "feb", "mar" = "mar", "abr" = "apr",
"may" = "may", "jun" = "jun", "jul" = "jul", "ago" = "aug",
"sept" = "sep", "oct" = "oct", "nov" = "nov", "dic" = "dec"
)
# English month order
month_order <- c("jan", "feb", "mar", "apr", "may", "jun",
"jul", "aug", "sep", "oct", "nov", "dec")
# Summarize by month and species
harvest_summary <- harvest_IFOP_month %>%
mutate(month = recode(month, !!!month_translation)) %>%  # Translate to English
group_by(month, specie) %>%  # Make sure your column is 'species'
summarise(harvest = mean(total_harvest_IFOP_centrosur, na.rm = TRUE),
.groups = "drop") %>%
mutate(month = factor(month, levels = month_order)) %>%
mutate(specie = recode(specie,
"ANCHOVETA" = "Anchoveta",
"SARDINA COMUN" = "Sardine",
"JUREL" = "Jack Mackerel"))
# Plot with facets by species
ggplot(harvest_summary, aes(x = month, y = harvest, fill = specie)) +
geom_bar(stat = "identity") +
facet_wrap(~ specie, scales = "free_y", ncol = 1) +
labs(x = "Month", y = "Average Harvest (tons)", fill = "Specie") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_fill_brewer(palette = "Paired")
rm(harvest_summary)
rm(list = c("harvest_IFOP", "harvest_SERNAPESCA", "harvest_IFOP_logbooks"))
library(ggplot2)
library(dplyr)
library(tidyr)
harvest_long <- harvest %>%
dplyr::select(c("specie", "year",
"total_harvest_IFOP_centrosur",
"harvest_LANCHAS_IFOP_centrosur",
"harvest_BOTES_IFOP_centrosur",
"harvest_IND_IFOP_centrosur",
"total_harvest_all_SERNAPESCA_Centro_Sur",
"harvest_IFOP_loogbook_centrosur")) %>%
pivot_longer(cols = c("total_harvest_IFOP_centrosur",
"harvest_LANCHAS_IFOP_centrosur",
"harvest_BOTES_IFOP_centrosur",
"harvest_IND_IFOP_centrosur",
"total_harvest_all_SERNAPESCA_Centro_Sur",
"harvest_IFOP_loogbook_centrosur"),
names_to = "source",
values_to = "harvest") %>%
mutate(source = recode(source,
"harvest_LANCHAS_IFOP_centrosur" = "Lanchas IFOP",
"harvest_BOTES_IFOP_centrosur" = "Botes IFOP",
"harvest_IND_IFOP_centrosur" = "Industrial IFOP",
"total_harvest_IFOP_centrosur" = "Total IFOP",
"total_harvest_all_SERNAPESCA_Centro_Sur" = "Total SERNAPESCA",
"harvest_IFOP_loogbook_centrosur" = "Total IFOP (logbooks)")) %>%
filter(source %in% c("Total IFOP", "Total SERNAPESCA", "Total IFOP (logbooks)", "Lanchas IFOP", "Botes IFOP",
"Industrial IFOP"))
# Gráfico
ggplot(harvest_long, aes(x = year, y = harvest, color = source)) +
geom_line(size = 1) +
facet_wrap(~specie, scales = "free_y") +
labs(x = "Año",
y = "Annual landings (tons)",
color = "Source") +
theme_minimal() +
theme(legend.position = "bottom")
rm(harvest_long)
library(ggplot2)
library(tidyr)
library(scales)
library(viridis)
biomass_long <- biomass %>%
pivot_longer(cols = c(sardine_biomass, anchoveta_biomass, jurel_biomass_cs, , jurel_biomass_cs_intra),
names_to = "species",
values_to = "biomass") %>%
filter(!is.na(biomass)) %>%
arrange(species, year)
biomass_long$biomass <- as.numeric(biomass_long$biomass)
biomass_long$year <- as.numeric(biomass_long$year)
biomass_long$species <- recode(biomass_long$species,
sardine_biomass = "Sardine",
anchoveta_biomass = "Anchoveta",
jurel_biomass_cs = "Jack Mackerel",
jurel_biomass_cs_intra = "Jack Mackerel (intrapolated)")
biomass <- biomass_long %>% filter(species %in% c("Sardine", "Anchoveta", "Jack Mackerel", "Jack Mackerel (intrapolated)"))
# Plot
ggplot(biomass, aes(x = year, y = biomass, color = species, group = species)) +
geom_smooth(se = TRUE, method = "loess", span = 0.4, linetype = "solid") +
scale_y_continuous(labels = scales::comma) +  # Or use scale_y_log10(labels = comma) to compress
labs(x = "Year",
y = "Biomass (tons)",
color = "Species") +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5),
axis.text.y = element_text(angle = 0, hjust = 1),
legend.position = "right"
) +
scale_color_viridis_d(option = "D")
rm(list = c("biomass_long"))
harvest2 <- harvest %>%
select(c(specie, year, total_harvest_IFOP_centrosur))
View(harvest2)
harvest2 <- harvest %>%
select(c(specie, year, total_harvest_IFOP_centrosur)) %>%
mutate(specie = recode(specie,
"SARDINA COMUN" = "Sardine",
"JUREL" = "Jack Mackerel",
"ANCHOVETA" = "Anchoveta"
)) %>%
rename(harvest = total_harvest_IFOP_centrosur) %>%
rename(species = specie)
View(biomass)
harvest2 <- harvest %>%
select(c(specie, year, total_harvest_IFOP_centrosur)) %>%
mutate(specie = recode(specie,
"SARDINA COMUN" = "Sardine",
"JUREL" = "Jack Mackerel",
"ANCHOVETA" = "Anchoveta"
)) %>%
rename(harvest = total_harvest_IFOP_centrosur) %>%
rename(species = specie)
harvest2 <- bind_rows(
harvest2,
harvest2 %>%
filter(species == "Jack Mackerel") %>%
mutate(species = "Jack Mackerel (interpolated)")
)
View(harvest2)
biomass_harvest <- full_join(biomass, harvest, by = c("species" = "species", "year" = "year")) %>% arrange(species, year)
biomass_harvest <- full_join(biomass, harvest2, by = c("species" = "species", "year" = "year")) %>% arrange(species, year)
View(biomass_harvest)
harvest2 <- harvest %>%
select(c(specie, year, total_harvest_IFOP_centrosur)) %>%
mutate(specie = recode(specie,
"SARDINA COMUN" = "Sardine",
"JUREL" = "Jack Mackerel",
"ANCHOVETA" = "Anchoveta"
)) %>%
rename(harvest = total_harvest_IFOP_centrosur) %>%
rename(species = specie)
harvest2 <- bind_rows(
harvest2,
harvest2 %>%
filter(species == "Jack Mackerel") %>%
mutate(species = "Jack Mackerel (intrapolated)")
)
biomass_harvest <- full_join(biomass, harvest2, by = c("species" = "species", "year" = "year")) %>% arrange(species, year)
biomass_harvest_long <- biomass_harvest %>%
pivot_longer(cols = c(biomass, harvest),
names_to = "variable",
values_to = "value")
ggplot(biomass_harvest_long, aes(x = year, y = value, color = variable)) +
geom_line(size = 1, na.rm = TRUE) +
geom_point(size = 2, na.rm = TRUE) +
facet_wrap(~species, scales = "free_y") +  # 1 panel per species, adjust scales as needed
labs(x = "Year", y = "Value (tons)", color = "Variable") +
scale_color_manual(values = c("biomass" = "darkgreen", "harvest" = "steelblue")) +
theme_minimal() +
theme(legend.position = "top")
ggplot(biomass_harvest_long, aes(x = year, y = value, color = variable)) +
geom_line(size = 1, na.rm = TRUE) +
geom_point(size = 2, na.rm = TRUE) +
geom_smooth(se = FALSE, span = 0.4, method = "loess", na.rm = TRUE) + # <- smoothing
facet_wrap(~species, scales = "free_y") +
labs(x = "Year", y = "Value (tons)", color = "Variable") +
scale_color_manual(values = c("biomass" = "darkgreen", "harvest" = "steelblue")) +
theme_minimal() +
theme(legend.position = "top")
ggplot(biomass_harvest_long, aes(x = year, y = value, color = variable)) +
# geom_line(size = 1, na.rm = TRUE) +
# geom_point(size = 2, na.rm = TRUE) +
geom_smooth(se = FALSE, span = 0.4, method = "loess", na.rm = TRUE) + # <- smoothing
facet_wrap(~species, scales = "free_y") +
labs(x = "Year", y = "Value (tons)", color = "Variable") +
scale_color_manual(values = c("biomass" = "darkgreen", "harvest" = "steelblue")) +
theme_minimal() +
theme(legend.position = "top")
library(kableExtra)
library(stringr)
# INDUSTRIAL VS ARTISANAL!
# Rename for joining
before <- strategy_percent_before %>%
rename(strategy = strategy_Before, n_before = n, percent_before = percent)
after <- strategy_percent %>%
rename(strategy = strategy_After, n_after = n, percent_after = percent)
# Merge strategies
strategy_summary <- full_join(before, after, by = c("strategy", "TIPO_FLOTA")) %>%
arrange(desc(coalesce(percent_after, 0) + coalesce(percent_before, 0))) %>%
mutate(across(where(is.numeric), ~replace_na(., 0)))
strategy_table <- strategy_summary %>%
group_by(TIPO_FLOTA) %>%
mutate(row_id = row_number()) %>%   # index within each fleet
ungroup() %>%
select(row_id, TIPO_FLOTA, strategy, n_before, percent_before, n_after, percent_after) %>%
pivot_wider(
names_from = TIPO_FLOTA,
values_from = c(strategy, n_before, percent_before, n_after, percent_after),
names_glue = "{.value}_{TIPO_FLOTA}"
) %>%
select(-row_id)   # drop helper column
strategy_table %>%
kable("latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n", "%", "n", "%",
"Strategy", "n", "%", "n", "%"),
caption = "Comparison of Strategies Before and After by Fleet") %>%
add_header_above(c("IND" = 5, "ART" = 5)) %>%
kable_styling(font_size = 10)
rm(list = ls())
gc()
# Definir directorios según usuario
usuario <- Sys.info()[["user"]]
# computador <- Sys.info()[["nodename"]]  # Alternativamente puedes usar esto
if (usuario == "felip") {
dirdata <- "C:/Users/felip/OneDrive - Universidad de Concepción/FONDECYT Iniciacion/Data/"
} else if (usuario == "FACEA") {
dirdata <- "C:/Users/FACEA/OneDrive - Universidad de Concepción/FONDECYT Iniciacion/Data/"
} else {
stop("Usuario no reconocido. Defina el directorio correspondiente.")
}
rm(usuario)
env_dt <- readRDS("data/env/EnvCoastDaily_2012_2025_0.125deg.rds")
biomass <- readRDS("data/biomass/biomass_dt.rds")
logbooks <- readRDS("data/logbooks/logbooks.rds")
library(dplyr)
library(data.table)
library(lubridate)
library(sf)
library(rnaturalearth)
library(ggplot2)
library(tidyr)
library(purrr)
# Build shares per vessel/fleet/year/species
vessel_species_year <- logbooks %>%
filter(year >= 2019) %>%
select(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, CAPTURA_RETENIDA) %>%
group_by(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE) %>%
summarise(total_catch = sum(CAPTURA_RETENIDA, na.rm = TRUE), .groups = "drop") %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
mutate(species_share = total_catch / sum(total_catch, na.rm = TRUE)) %>%
ungroup() %>%
select(-total_catch) %>%
complete(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, fill = list(species_share = 0)) %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
filter(sum(species_share, na.rm = TRUE) > 0) %>%
group_by(COD_BARCO, TIPO_FLOTA, NOMBRE_ESPECIE) %>%
summarise(species_share = mean(species_share, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(
names_from = NOMBRE_ESPECIE,
values_from = species_share,
values_fill = 0
) %>%
# here just add missing columns if they don't exist
{ if(!"ANCHOVETA" %in% names(.)) .$ANCHOVETA <- 0; . } %>%
{ if(!"SARDINA COMUN" %in% names(.)) .$`SARDINA COMUN` <- 0; . } %>%
{ if(!"JUREL" %in% names(.)) .$JUREL <- 0; . } %>%
mutate(
Other = 1 - ANCHOVETA - `SARDINA COMUN` - JUREL,
Anchoveta = ANCHOVETA,
Sardine = `SARDINA COMUN`,
JackMackerel = JUREL
) %>%
select(COD_BARCO, TIPO_FLOTA, Anchoveta, Sardine, JackMackerel, Other)
# Strategy function
get_strategy <- function(sardine, jackmackerel, anchoveta, other) {
species <- c()
if (sardine > 0.15) species <- c(species, "Sardine")
if (jackmackerel > 0.15) species <- c(species, "JackMackerel")
if (anchoveta > 0.15) species <- c(species, "Anchoveta")
if (other > 0.15) species <- c(species, "Other")
n <- length(species)
if (n == 0) return("None or negligible")
if (n == 1) return(paste("Only", species[1]))
if (n == 2) return(paste(species[1], "and", species[2]))
if (n == 3) return(paste(species[1], ",", species[2], "and", species[3]))
return(paste(species, collapse = ", "))
}
# Apply strategy classification
vessel_species_year <- vessel_species_year %>%
mutate(strategy_After = pmap_chr(
list(Sardine, JackMackerel, Anchoveta, Other),
get_strategy
))
# Percentages by fleet type
strategy_percent <- vessel_species_year %>%
group_by(TIPO_FLOTA, strategy_After) %>%
summarise(n = n(), .groups = "drop") %>%
group_by(TIPO_FLOTA) %>%
mutate(percent = round(100 * n / sum(n), 1)) %>%
arrange(TIPO_FLOTA, desc(percent))
# Final table vessel-strategy
strategy_after <- vessel_species_year %>%
select(COD_BARCO, TIPO_FLOTA, strategy_After)
# Build shares per vessel/fleet/year/species
vessel_species_year <- logbooks %>%
filter(year < 2019) %>%
select(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, CAPTURA_RETENIDA) %>%
group_by(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE) %>%
summarise(total_catch = sum(CAPTURA_RETENIDA, na.rm = TRUE), .groups = "drop") %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
mutate(species_share = total_catch / sum(total_catch, na.rm = TRUE)) %>%
ungroup() %>%
select(-total_catch) %>%
complete(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, fill = list(species_share = 0)) %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
filter(sum(species_share, na.rm = TRUE) > 0) %>%
group_by(COD_BARCO, TIPO_FLOTA, NOMBRE_ESPECIE) %>%
summarise(species_share = mean(species_share, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(
names_from = NOMBRE_ESPECIE,
values_from = species_share,
values_fill = 0
) %>%
# here just add missing columns if they don't exist
{ if(!"ANCHOVETA" %in% names(.)) .$ANCHOVETA <- 0; . } %>%
{ if(!"SARDINA COMUN" %in% names(.)) .$`SARDINA COMUN` <- 0; . } %>%
{ if(!"JUREL" %in% names(.)) .$JUREL <- 0; . } %>%
mutate(
Other = 1 - ANCHOVETA - `SARDINA COMUN` - JUREL,
Anchoveta = ANCHOVETA,
Sardine = `SARDINA COMUN`,
JackMackerel = JUREL
) %>%
select(COD_BARCO, TIPO_FLOTA, Anchoveta, Sardine, JackMackerel, Other)
# Apply strategy classification
vessel_species_year <- vessel_species_year %>%
mutate(strategy_Before = pmap_chr(
list(Sardine, JackMackerel, Anchoveta, Other),
get_strategy
))
# Percentages by fleet type
strategy_percent_before <- vessel_species_year %>%
group_by(TIPO_FLOTA, strategy_Before) %>%
summarise(n = n(), .groups = "drop") %>%
group_by(TIPO_FLOTA) %>%
mutate(percent = round(100 * n / sum(n), 1)) %>%
arrange(TIPO_FLOTA, desc(percent))
# Final table vessel-strategy
strategy_before <- vessel_species_year %>%
select(COD_BARCO, TIPO_FLOTA, strategy_Before)
library(kableExtra)
library(stringr)
# Rename for joining
before <- strategy_percent_before %>%
rename(strategy = strategy_Before, n_before = n, percent_before = percent)
after <- strategy_percent %>%
rename(strategy = strategy_After, n_after = n, percent_after = percent)
# Merge strategies
strategy_summary <- full_join(before, after, by = c("strategy", "TIPO_FLOTA")) %>%
arrange(desc(coalesce(percent_after, 0) + coalesce(percent_before, 0))) %>%
mutate(across(where(is.numeric), ~replace_na(., 0)))
# Filter only ART
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
select(strategy, n_before, percent_before, n_after, percent_after)
View(strategy_table_art)
strategy_table_art %>%
kable("latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "% (Before)", "n (After)", "% (After)"),
caption = "Comparison of Strategies Before and After (ART Fleet)") %>%
kable_styling(font_size = 10)
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
select(strategy, n_before, percent_before, n_after, percent_after) %>% select(-c("TIPO_FLOTA"))
strategy_table_art %>%
kable("latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "% (Before)", "n (After)", "% (After)"),
caption = "Comparison of Strategies Before and After (ART Fleet)") %>%
kable_styling(font_size = 10)
View(strategy_table_art)
# Filter only ART
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
select(strategy, n_before, percent_before, n_after, percent_after)
View(strategy_table_art)
# Filter only ART
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
dplyr::select(strategy, n_before, percent_before, n_after, percent_after)
View(strategy_table_art)
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
dplyr::select(c("strategy", "n_before", "percent_before", "n_after", "percent_after"))
View(strategy_table_art)
