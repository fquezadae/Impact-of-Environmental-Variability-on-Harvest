# INDUSTRIAL VS ARTISANAL!
# Rename for joining
before <- strategy_percent_before %>%
rename(strategy = strategy_Before, n_before = n, percent_before = percent)
after <- strategy_percent %>%
rename(strategy = strategy_After, n_after = n, percent_after = percent)
# Merge strategies
strategy_summary <- full_join(before, after, by = c("strategy", "TIPO_FLOTA")) %>%
arrange(desc(coalesce(percent_after, 0) + coalesce(percent_before, 0))) %>%
mutate(across(where(is.numeric), ~replace_na(., 0)))
strategy_table <- strategy_summary %>%
group_by(TIPO_FLOTA) %>%
mutate(row_id = row_number()) %>%   # index within each fleet
ungroup() %>%
select(row_id, TIPO_FLOTA, strategy, n_before, percent_before, n_after, percent_after) %>%
pivot_wider(
names_from = TIPO_FLOTA,
values_from = c(strategy, n_before, percent_before, n_after, percent_after),
names_glue = "{.value}_{TIPO_FLOTA}"
) %>%
select(-row_id)   # drop helper column
strategy_table %>%
kable("latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n", "%", "n", "%",
"Strategy", "n", "%", "n", "%"),
caption = "Comparison of Strategies Before and After by Fleet") %>%
add_header_above(c("IND" = 5, "ART" = 5)) %>%
kable_styling(font_size = 10)
rm(list = ls())
gc()
# Definir directorios según usuario
usuario <- Sys.info()[["user"]]
# computador <- Sys.info()[["nodename"]]  # Alternativamente puedes usar esto
if (usuario == "felip") {
dirdata <- "C:/Users/felip/OneDrive - Universidad de Concepción/FONDECYT Iniciacion/Data/"
} else if (usuario == "FACEA") {
dirdata <- "C:/Users/FACEA/OneDrive - Universidad de Concepción/FONDECYT Iniciacion/Data/"
} else {
stop("Usuario no reconocido. Defina el directorio correspondiente.")
}
rm(usuario)
env_dt <- readRDS("data/env/EnvCoastDaily_2012_2025_0.125deg.rds")
biomass <- readRDS("data/biomass/biomass_dt.rds")
logbooks <- readRDS("data/logbooks/logbooks.rds")
library(dplyr)
library(data.table)
library(lubridate)
library(sf)
library(rnaturalearth)
library(ggplot2)
library(tidyr)
library(purrr)
# Build shares per vessel/fleet/year/species
vessel_species_year <- logbooks %>%
filter(year >= 2019) %>%
select(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, CAPTURA_RETENIDA) %>%
group_by(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE) %>%
summarise(total_catch = sum(CAPTURA_RETENIDA, na.rm = TRUE), .groups = "drop") %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
mutate(species_share = total_catch / sum(total_catch, na.rm = TRUE)) %>%
ungroup() %>%
select(-total_catch) %>%
complete(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, fill = list(species_share = 0)) %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
filter(sum(species_share, na.rm = TRUE) > 0) %>%
group_by(COD_BARCO, TIPO_FLOTA, NOMBRE_ESPECIE) %>%
summarise(species_share = mean(species_share, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(
names_from = NOMBRE_ESPECIE,
values_from = species_share,
values_fill = 0
) %>%
# here just add missing columns if they don't exist
{ if(!"ANCHOVETA" %in% names(.)) .$ANCHOVETA <- 0; . } %>%
{ if(!"SARDINA COMUN" %in% names(.)) .$`SARDINA COMUN` <- 0; . } %>%
{ if(!"JUREL" %in% names(.)) .$JUREL <- 0; . } %>%
mutate(
Other = 1 - ANCHOVETA - `SARDINA COMUN` - JUREL,
Anchoveta = ANCHOVETA,
Sardine = `SARDINA COMUN`,
JackMackerel = JUREL
) %>%
select(COD_BARCO, TIPO_FLOTA, Anchoveta, Sardine, JackMackerel, Other)
# Strategy function
get_strategy <- function(sardine, jackmackerel, anchoveta, other) {
species <- c()
if (sardine > 0.15) species <- c(species, "Sardine")
if (jackmackerel > 0.15) species <- c(species, "JackMackerel")
if (anchoveta > 0.15) species <- c(species, "Anchoveta")
if (other > 0.15) species <- c(species, "Other")
n <- length(species)
if (n == 0) return("None or negligible")
if (n == 1) return(paste("Only", species[1]))
if (n == 2) return(paste(species[1], "and", species[2]))
if (n == 3) return(paste(species[1], ",", species[2], "and", species[3]))
return(paste(species, collapse = ", "))
}
# Apply strategy classification
vessel_species_year <- vessel_species_year %>%
mutate(strategy_After = pmap_chr(
list(Sardine, JackMackerel, Anchoveta, Other),
get_strategy
))
# Percentages by fleet type
strategy_percent <- vessel_species_year %>%
group_by(TIPO_FLOTA, strategy_After) %>%
summarise(n = n(), .groups = "drop") %>%
group_by(TIPO_FLOTA) %>%
mutate(percent = round(100 * n / sum(n), 1)) %>%
arrange(TIPO_FLOTA, desc(percent))
# Final table vessel-strategy
strategy_after <- vessel_species_year %>%
select(COD_BARCO, TIPO_FLOTA, strategy_After)
# Build shares per vessel/fleet/year/species
vessel_species_year <- logbooks %>%
filter(year < 2019) %>%
select(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, CAPTURA_RETENIDA) %>%
group_by(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE) %>%
summarise(total_catch = sum(CAPTURA_RETENIDA, na.rm = TRUE), .groups = "drop") %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
mutate(species_share = total_catch / sum(total_catch, na.rm = TRUE)) %>%
ungroup() %>%
select(-total_catch) %>%
complete(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, fill = list(species_share = 0)) %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
filter(sum(species_share, na.rm = TRUE) > 0) %>%
group_by(COD_BARCO, TIPO_FLOTA, NOMBRE_ESPECIE) %>%
summarise(species_share = mean(species_share, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(
names_from = NOMBRE_ESPECIE,
values_from = species_share,
values_fill = 0
) %>%
# here just add missing columns if they don't exist
{ if(!"ANCHOVETA" %in% names(.)) .$ANCHOVETA <- 0; . } %>%
{ if(!"SARDINA COMUN" %in% names(.)) .$`SARDINA COMUN` <- 0; . } %>%
{ if(!"JUREL" %in% names(.)) .$JUREL <- 0; . } %>%
mutate(
Other = 1 - ANCHOVETA - `SARDINA COMUN` - JUREL,
Anchoveta = ANCHOVETA,
Sardine = `SARDINA COMUN`,
JackMackerel = JUREL
) %>%
select(COD_BARCO, TIPO_FLOTA, Anchoveta, Sardine, JackMackerel, Other)
# Apply strategy classification
vessel_species_year <- vessel_species_year %>%
mutate(strategy_Before = pmap_chr(
list(Sardine, JackMackerel, Anchoveta, Other),
get_strategy
))
# Percentages by fleet type
strategy_percent_before <- vessel_species_year %>%
group_by(TIPO_FLOTA, strategy_Before) %>%
summarise(n = n(), .groups = "drop") %>%
group_by(TIPO_FLOTA) %>%
mutate(percent = round(100 * n / sum(n), 1)) %>%
arrange(TIPO_FLOTA, desc(percent))
# Final table vessel-strategy
strategy_before <- vessel_species_year %>%
select(COD_BARCO, TIPO_FLOTA, strategy_Before)
library(kableExtra)
library(stringr)
# Rename for joining
before <- strategy_percent_before %>%
rename(strategy = strategy_Before, n_before = n, percent_before = percent)
after <- strategy_percent %>%
rename(strategy = strategy_After, n_after = n, percent_after = percent)
# Merge strategies
strategy_summary <- full_join(before, after, by = c("strategy", "TIPO_FLOTA")) %>%
arrange(desc(coalesce(percent_after, 0) + coalesce(percent_before, 0))) %>%
mutate(across(where(is.numeric), ~replace_na(., 0)))
# Filter only ART
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
select(strategy, n_before, percent_before, n_after, percent_after)
View(strategy_table_art)
strategy_table_art %>%
kable("latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "% (Before)", "n (After)", "% (After)"),
caption = "Comparison of Strategies Before and After (ART Fleet)") %>%
kable_styling(font_size = 10)
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
select(strategy, n_before, percent_before, n_after, percent_after) %>% select(-c("TIPO_FLOTA"))
strategy_table_art %>%
kable("latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "% (Before)", "n (After)", "% (After)"),
caption = "Comparison of Strategies Before and After (ART Fleet)") %>%
kable_styling(font_size = 10)
View(strategy_table_art)
# Filter only ART
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
select(strategy, n_before, percent_before, n_after, percent_after)
View(strategy_table_art)
# Filter only ART
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
dplyr::select(strategy, n_before, percent_before, n_after, percent_after)
View(strategy_table_art)
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
dplyr::select(c("strategy", "n_before", "percent_before", "n_after", "percent_after"))
View(strategy_table_art)
library(readxl)
Base_de_Datos_Ejercicio_Probit <- read_excel("C:/Users/FACEA/OneDrive - Universidad de Concepción/Docencia/Econometria II/Unidad 3/Base de Datos Ejercicio Probit.xlsx")
View(Base_de_Datos_Ejercicio_Probit)
rm(list = ls())
gc()
# Definir directorios según usuario
usuario <- Sys.info()[["user"]]
# computador <- Sys.info()[["nodename"]]  # Alternativamente puedes usar esto
if (usuario == "felip") {
dirdata <- "C:/Users/felip/OneDrive - Universidad de Concepción/FONDECYT Iniciacion/Data/"
} else if (usuario == "FACEA") {
dirdata <- "C:/Users/FACEA/OneDrive - Universidad de Concepción/FONDECYT Iniciacion/Data/"
} else {
stop("Usuario no reconocido. Defina el directorio correspondiente.")
}
rm(usuario)
env_dt <- readRDS("data/env/EnvCoastDaily_2012_2025_0.125deg.rds")
biomass <- readRDS("data/biomass/biomass_dt.rds")
logbooks <- readRDS("data/logbooks/logbooks.rds")
library(dplyr)
library(data.table)
library(lubridate)
library(sf)
library(rnaturalearth)
library(ggplot2)
library(tidyr)
library(purrr)
# Build shares per vessel/fleet/year/species
vessel_species_year <- logbooks %>%
filter(year >= 2019) %>%
select(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, CAPTURA_RETENIDA) %>%
group_by(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE) %>%
summarise(total_catch = sum(CAPTURA_RETENIDA, na.rm = TRUE), .groups = "drop") %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
mutate(species_share = total_catch / sum(total_catch, na.rm = TRUE)) %>%
ungroup() %>%
select(-total_catch) %>%
complete(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, fill = list(species_share = 0)) %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
filter(sum(species_share, na.rm = TRUE) > 0) %>%
group_by(COD_BARCO, TIPO_FLOTA, NOMBRE_ESPECIE) %>%
summarise(species_share = mean(species_share, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(
names_from = NOMBRE_ESPECIE,
values_from = species_share,
values_fill = 0
) %>%
# here just add missing columns if they don't exist
{ if(!"ANCHOVETA" %in% names(.)) .$ANCHOVETA <- 0; . } %>%
{ if(!"SARDINA COMUN" %in% names(.)) .$`SARDINA COMUN` <- 0; . } %>%
{ if(!"JUREL" %in% names(.)) .$JUREL <- 0; . } %>%
mutate(
Other = 1 - ANCHOVETA - `SARDINA COMUN` - JUREL,
Anchoveta = ANCHOVETA,
Sardine = `SARDINA COMUN`,
JackMackerel = JUREL
) %>%
select(COD_BARCO, TIPO_FLOTA, Anchoveta, Sardine, JackMackerel, Other)
# Strategy function
get_strategy <- function(sardine, jackmackerel, anchoveta, other) {
species <- c()
if (sardine > 0.15) species <- c(species, "Sardine")
if (jackmackerel > 0.15) species <- c(species, "JackMackerel")
if (anchoveta > 0.15) species <- c(species, "Anchoveta")
if (other > 0.15) species <- c(species, "Other")
n <- length(species)
if (n == 0) return("None or negligible")
if (n == 1) return(paste("Only", species[1]))
if (n == 2) return(paste(species[1], "and", species[2]))
if (n == 3) return(paste(species[1], ",", species[2], "and", species[3]))
return(paste(species, collapse = ", "))
}
# Apply strategy classification
vessel_species_year <- vessel_species_year %>%
mutate(strategy_After = pmap_chr(
list(Sardine, JackMackerel, Anchoveta, Other),
get_strategy
))
# Percentages by fleet type
strategy_percent <- vessel_species_year %>%
group_by(TIPO_FLOTA, strategy_After) %>%
summarise(n = n(), .groups = "drop") %>%
group_by(TIPO_FLOTA) %>%
mutate(percent = round(100 * n / sum(n), 1)) %>%
arrange(TIPO_FLOTA, desc(percent))
# Final table vessel-strategy
strategy_after <- vessel_species_year %>%
select(COD_BARCO, TIPO_FLOTA, strategy_After)
# Build shares per vessel/fleet/year/species
vessel_species_year <- logbooks %>%
filter(year < 2019) %>%
select(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, CAPTURA_RETENIDA) %>%
group_by(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE) %>%
summarise(total_catch = sum(CAPTURA_RETENIDA, na.rm = TRUE), .groups = "drop") %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
mutate(species_share = total_catch / sum(total_catch, na.rm = TRUE)) %>%
ungroup() %>%
select(-total_catch) %>%
complete(COD_BARCO, TIPO_FLOTA, year, NOMBRE_ESPECIE, fill = list(species_share = 0)) %>%
group_by(COD_BARCO, TIPO_FLOTA, year) %>%
filter(sum(species_share, na.rm = TRUE) > 0) %>%
group_by(COD_BARCO, TIPO_FLOTA, NOMBRE_ESPECIE) %>%
summarise(species_share = mean(species_share, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(
names_from = NOMBRE_ESPECIE,
values_from = species_share,
values_fill = 0
) %>%
# here just add missing columns if they don't exist
{ if(!"ANCHOVETA" %in% names(.)) .$ANCHOVETA <- 0; . } %>%
{ if(!"SARDINA COMUN" %in% names(.)) .$`SARDINA COMUN` <- 0; . } %>%
{ if(!"JUREL" %in% names(.)) .$JUREL <- 0; . } %>%
mutate(
Other = 1 - ANCHOVETA - `SARDINA COMUN` - JUREL,
Anchoveta = ANCHOVETA,
Sardine = `SARDINA COMUN`,
JackMackerel = JUREL
) %>%
select(COD_BARCO, TIPO_FLOTA, Anchoveta, Sardine, JackMackerel, Other)
# Apply strategy classification
vessel_species_year <- vessel_species_year %>%
mutate(strategy_Before = pmap_chr(
list(Sardine, JackMackerel, Anchoveta, Other),
get_strategy
))
# Percentages by fleet type
strategy_percent_before <- vessel_species_year %>%
group_by(TIPO_FLOTA, strategy_Before) %>%
summarise(n = n(), .groups = "drop") %>%
group_by(TIPO_FLOTA) %>%
mutate(percent = round(100 * n / sum(n), 1)) %>%
arrange(TIPO_FLOTA, desc(percent))
# Final table vessel-strategy
strategy_before <- vessel_species_year %>%
select(COD_BARCO, TIPO_FLOTA, strategy_Before)
library(kableExtra)
library(stringr)
# Rename for joining
before <- strategy_percent_before %>%
rename(strategy = strategy_Before, n_before = n, percent_before = percent)
after <- strategy_percent %>%
rename(strategy = strategy_After, n_after = n, percent_after = percent)
# Merge strategies
strategy_summary <- full_join(before, after, by = c("strategy", "TIPO_FLOTA")) %>%
arrange(desc(coalesce(percent_after, 0) + coalesce(percent_before, 0))) %>%
mutate(across(where(is.numeric), ~replace_na(., 0)))
# Filter only ART
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
dplyr::select(c("strategy", "n_before", "percent_before", "n_after", "percent_after"))
View(strategy_table_art)
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART")
View(strategy_table_art)
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
dplyr::select(-c("TIPO_FLOTA"))
View(strategy_table_art)
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
dplyr::select(-c(TIPO_FLOTA))
View(strategy_table_art)
str(strategy_table_art)
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
ungroup() %>%
select(-TIPO_FLOTA)
View(strategy_table_art)
# Table
strategy_table_art %>%
kable("latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "% (Before)", "n (After)", "% (After)"),
caption = "Comparison of Strategies Before and After (ART Fleet)") %>%
kable_styling(font_size = 10)
View(strategy_table_art)
strategy_table_art %>%
kable(
"latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "% (Before)", "n (After)", "% (After)"),
caption = "\\textbf{Comparison of Strategies Before and After -- Small-scale Fleet}"
) %>%
kable_styling(font_size = 10)
library(kableExtra)
library(stringr)
# Rename for joining
before <- strategy_percent_before %>%
rename(strategy = strategy_Before, n_before = n, percent_before = percent)
after <- strategy_percent %>%
rename(strategy = strategy_After, n_after = n, percent_after = percent)
# Merge strategies
strategy_summary <- full_join(before, after, by = c("strategy", "TIPO_FLOTA")) %>%
arrange(desc(coalesce(percent_after, 0) + coalesce(percent_before, 0))) %>%
mutate(across(where(is.numeric), ~replace_na(., 0)))
# Filter only ART
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
ungroup() %>%
select(-TIPO_FLOTA)
# Table
strategy_table_art %>%
kable(
"latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "\\% (Before)", "n (After)", "\\% (After)"),
escape = FALSE,
caption = "Strategies of the artisanal fleet before and after"
) %>%
kable_styling(font_size = 10)
strategy_table_art %>%
kable(
"latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "\\% (Before)", "n (After)", "\\% (After)"),
escape = FALSE,
caption = "$$\text{Strategies of the artisanal fleet before and after}$$"
) %>%
kable_styling(font_size = 10)
strategy_table_art %>%
kable(
"latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "\\% (Before)", "n (After)", "\\% (After)"),
escape = FALSE,
caption = "$$\\text{Strategies of the artisanal fleet before and after}$$"
) %>%
kable_styling(font_size = 10)
strategy_table_art %>%
kable(
"latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "\\% (Before)", "n (After)", "\\% (After)"),
escape = FALSE,
caption = "$\\text{Strategies of the artisanal fleet before and after}$"
) %>%
kable_styling(font_size = 10)
strategy_table_art %>%
kable(
"latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "\\% (Before)", "n (After)", "\\% (After)"),
escape = FALSE,
caption = "Strategies of the artisanal fleet before and after"
) %>%
kable_styling(font_size = 10)
strategy_table_art %>%
kable(
"latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "\% (Before)", "n (After)", "\% (After)"),
bookdown::render_book("manuscript.Rmd", "bookdown::pdf_document2")
bookdown::kable(
strategy_table_art,
booktabs = TRUE,
digits = 1,
col.names = c("Strategy", "n (Before)", "\\% (Before)", "n (After)", "\\% (After)"),
caption = "Strategies of the artisanal fleet before and after"
) %>%
kableExtra::kable_styling(font_size = 10)
knitr::kable(
strategy_table_art,
"latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n (Before)", "\\% (Before)", "n (After)", "\\% (After)"),
escape = FALSE,
caption = "Strategies of the artisanal fleet before and after"
) %>%
kableExtra::kable_styling(font_size = 10)
library(kableExtra)
library(stringr)
# Rename for joining
before <- strategy_percent_before %>%
rename(strategy = strategy_Before, n_before = n, percent_before = percent)
after <- strategy_percent %>%
rename(strategy = strategy_After, n_after = n, percent_after = percent)
# Merge strategies
strategy_summary <- full_join(before, after, by = c("strategy", "TIPO_FLOTA")) %>%
arrange(desc(coalesce(percent_after, 0) + coalesce(percent_before, 0))) %>%
mutate(across(where(is.numeric), ~replace_na(., 0)))
# Filter only ART
strategy_table_art <- strategy_summary %>%
filter(TIPO_FLOTA == "ART") %>%
ungroup() %>%
select(-TIPO_FLOTA)
knitr::kable(
strategy_table_art,
"latex",
col.names = c("Strategy", "n (Before)", "\\% (Before)", "n (After)", "\\% (After)"),
escape = FALSE,
caption = "Strategies of the artisanal fleet before and after"
)
knitr::kable(
strategy_table_art,
"latex",
col.names = c("Strategy", "n (Before)", "\\% (Before)", "n (After)", "\\% (After)"),
escape = FALSE,
caption = "Strategies of the artisanal fleet before and after"
)
knitr::kable(
strategy_table_art, caption = "Resumen de mtcars")
knitr::kable(
strategy_table_art)
knitr::kable(
strategy_table_art, booktabs = TRUE)
strategy_table_art %>%
kable("latex", booktabs = TRUE, caption = "Resumen de mtcars") %>%
kable_styling(latex_options = "HOLD_position")
knitr::kable(strategy_table_art, booktabs = TRUE)
# Create table with grouped columns
strategy_table_art  %>%
select(strategy, n_before, percent_before, n_after, percent_after) %>%
kable("latex", booktabs = TRUE, digits = 1,
col.names = c("Strategy", "n", "%", "n", "%"),
caption = "Comparison of Strategies Before and After") %>%
add_header_above(c(" " = 1, "Before" = 2, "After" = 2)) %>%
kable_styling(font_size = 10)
